<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	
	<title>Cohort Web Test</title>
	
	<meta name="description" content="">
	
  <!-- Mobile-friendly viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script type="text/javascript">
		
		source = new EventSource("/listen");

		source.addEventListener('open', function(e) {
  			console.log("opened sse connection");
		}, false);

		source.addEventListener('error', function(e) {
  			if (e.readyState == EventSource.CLOSED) {
    			console.log("closed sse connection");
  			}
		}, false);

		source.addEventListener('message', function(e) {
			console.log("received sse");
			console.log(data);
  			// var data = JSON.parse(e.data);
  			// console.log(data.id, data.msg);
		}, false);

		source.addEventListener('cohortMessage', function(e) {
			console.log("received sse");
			console.log(data);
  			// var data = JSON.parse(e.data);
  			// console.log(data.id, data.msg);
		}, false);

	</script>
	
</head>
<body>
	<main role="main">
		<h1>Cohort Web Test</h1>
    </main>
</body>
</html>